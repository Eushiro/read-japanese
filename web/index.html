<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>__BRAND_NAME__</title>

    <!-- Fonts: Fraunces for display, Inter for body, Noto Sans JP for Japanese -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,500;9..144,600;9..144,700&family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Critical theme styles - must load before anything else -->
    <style>
      /* Hide until theme is determined */
      html:not(.theme-ready) body { opacity: 0; }
      html.theme-ready body { opacity: 1; }

      /* Light mode CSS variables */
      :root {
        --background: #FAF7F2;
        --foreground: #1C1917;
        --card: #FFFFFF;
        --card-foreground: #1C1917;
        --popover: #FFFFFF;
        --popover-foreground: #1C1917;
        --primary: #C2410C;
        --primary-foreground: #FFFFFF;
        --secondary: #334155;
        --secondary-foreground: #FFFFFF;
        --muted: #F5F0E8;
        --muted-foreground: #78716C;
        --accent: #C2410C;
        --accent-foreground: #FFFFFF;
        --destructive: #DC2626;
        --border: #E7E0D5;
        --input: #E7E0D5;
        --ring: #C2410C;
        --color-background: #FAF7F2;
        --color-background-subtle: #F5F0E8;
        --color-surface: #FFFFFF;
        --color-surface-elevated: #FFFFFF;
        --color-foreground: #1C1917;
        --color-foreground-muted: #78716C;
        --color-border: #E7E0D5;
        --color-border-subtle: #F0EBE3;
        --color-accent: #C2410C;
        --color-muted: #F5F0E8;
      }

      /* Dark mode CSS variables - Pure black with warm accents */
      .dark {
        --background: #000000;
        --foreground: #f6f6f4;
        --card: rgba(38, 38, 38, 0.6);
        --card-foreground: #f6f6f4;
        --popover: #1a1a1a;
        --popover-foreground: #f6f6f4;
        --primary: #ff8400;
        --primary-foreground: #000000;
        --secondary: #1a1a1a;
        --secondary-foreground: #f6f6f4;
        --muted: #1a1a1a;
        --muted-foreground: rgba(246, 246, 244, 0.6);
        --accent: #ff8400;
        --accent-foreground: #000000;
        --destructive: #DC2626;
        --border: rgba(255, 255, 255, 0.08);
        --input: rgba(255, 255, 255, 0.08);
        --ring: #ff8400;
        --color-background: #000000;
        --color-background-subtle: #0a0a0a;
        --color-surface: rgba(38, 38, 38, 0.6);
        --color-surface-elevated: #1a1a1a;
        --color-foreground: #f6f6f4;
        --color-foreground-muted: rgba(246, 246, 244, 0.6);
        --color-border: rgba(255, 255, 255, 0.08);
        --color-border-subtle: rgba(255, 255, 255, 0.04);
        --color-accent: #ff8400;
        --color-muted: #1a1a1a;
      }

      html { background-color: var(--background); color: var(--foreground); }
      body { background-color: var(--background); }
    </style>

    <!-- Theme initialization - runs synchronously before anything renders -->
    <script>
      (function() {
        var storageKey = '__BRAND_THEME_KEY__';
        var theme = localStorage.getItem(storageKey);

        // Migrate from old storage if needed
        if (!theme) {
          try {
            var oldCache = localStorage.getItem('settingsCache');
            if (oldCache) {
              var oldTheme = JSON.parse(oldCache).theme;
              if (oldTheme) {
                theme = oldTheme;
                localStorage.setItem(storageKey, theme);
              }
            }
          } catch (e) {}
        }

        theme = theme || 'system';
        var isDark = theme === 'dark' ||
          (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);

        document.documentElement.classList.remove('light', 'dark');
        document.documentElement.classList.add(isDark ? 'dark' : 'light');
        document.documentElement.classList.add('theme-ready');
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
